---
layout: post
title: ZooKeeper:面向互联网规模系统的无等待协调服务（译）
author: 灵元 (译)
---
##摘要
	    在本论文中，我们描述ZooKeeper，这是一个分布式应用的进程协调服务。因为ZooKeeper是关键设施的一部分，ZooKeeper目的在于为在客户端构建更复杂的协调原语而提供一个简单且高性能的内核。它在基于复制、中心化服务的架构中采纳了来自于组通讯，共享寄存器，以及分布式锁服务的元素。ZooKeeper的接口具备共享寄存器的无等待特性，以及类似于分布式文件系统缓存失效的事件驱动机制，提供了一个简单而强大的协调服务。
	    通过ZooKeeper的接口，我们能够实现高性能的服务。除了无等待特性，ZooKeeper还为每个客户端提供了以FIFO序列的方式执行请求的保证，以及串行化所有更改ZooKeeper状态的请求。这些设计决策允许实现高性能的处理管道（pipeline），让本地服务器满足读请求。结果显示对于从2:1到100:1的目标负载，ZooKeeper每秒可以处理从几十到几十万的事务。该性能使得ZooKeeper可以被客户应用广泛使用。


## 1 引言
大规模分布式应用要求不同形式的协调服务。配置是一种最基本的协调服务。在它最简单的形式中，配置仅仅是该系统进程的一个操作参数的列表，而在更复杂得系统中，还具有动态配置参数。组-成员关系和leader election（领导选举)在分布式系统中也很普遍：进程常常需要知道其他进程中哪一个还是活动的，或者这些进程正占据什么资源。锁是一个强大的协调原语，实现了关键资源的护持访问。

协调的一种实现方案是为每一个不同的协调需求而开发各自的服务。例如，亚马逊的简单队列服务(Simple Queue Service)，特别专注于队列。其他服务专注于leader election或者配置。实现了更强大的原语的服务可以用来实现更弱一些的服务。例如，Chubby是一个具有强同步保证的锁服务。于是锁可以用来实现leader election，组-成员关系等。

当设计我们的协调服务时，我们决定不在服务端实现特定的协调原语，相反我们提供API使得应用开发者可以实现他们自己的原语。这种抉择的结果是我们实现了一个称为“协调内核”的东西，允许无需更改服务核心就能构造新的原语。本方案允许构造提供多种形式的协调服务，从而能更好地满足应用的需求，而不是强制开发者使用一组固定的原语。

当设计ZoopKeeper的API时，我们放弃了阻塞原语，如锁。协调服务中的阻塞原语会导致性能变差，或者说失效客户端会影响更快客户端的性能